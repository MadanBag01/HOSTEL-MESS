<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hostel Mess Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        h2 {
            text-align: center;
        }

        .section {
            margin-bottom: 40px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        .kitchen-box {
            background: white;
            background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRFMZmRgO0ShL7ZQ5q8iB1w5fD9iGYkgj6rnQ&s");
            background-size: cover;
            background-position: center;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            flex: 1 1 calc(25% - 20px);
            min-width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            cursor: pointer;
        }

        @media (max-width: 1024px) {
            .kitchen-box { flex: 1 1 calc(33.33% - 20px); }
        }

        @media (max-width: 768px) {
            .kitchen-box { flex: 1 1 calc(50% - 20px); }
        }

        @media (max-width: 480px) {
            .kitchen-box { flex: 1 1 100%; }
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 300px;
        }

        .modal button {
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #007bff;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
        }

        .modal button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div class="section">
        <h2>Subscribed Kitchens</h2>
        <div class="container" id="subscribedContainer"></div>
    </div>

    <div class="section">
        <h2>Available Kitchens</h2>
        <div class="container" id="unsubscribedContainer"></div>
    </div>

    <!-- Modal for Subscribe/Unsubscribe -->
    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent">
            <h3 id="modalTitle"></h3>
            <button id="actionButton"></button><br>
            <button onclick="closeModal()" style="margin-top:10px; background-color: gray;">Close</button>
        </div>
    </div>

    <script>
        const kitchens = ["Quines Kitchen", "Moms Kitchen", "Tasty Bites", "Healthy Meals", "Food Corner", "Spice Hub"];
        let subscribedKitchen = null;
        let subscriptionDate = null;

        const modal = document.getElementById("modal");
        const modalTitle = document.getElementById("modalTitle");
        const actionButton = document.getElementById("actionButton");

        function renderKitchens() {
            const subscribedContainer = document.getElementById("subscribedContainer");
            const unsubscribedContainer = document.getElementById("unsubscribedContainer");

            subscribedContainer.innerHTML = "";
            unsubscribedContainer.innerHTML = "";

            kitchens.forEach(name => {
                const box = document.createElement("div");
                box.className = "kitchen-box";
                box.textContent = name;
                box.onclick = () => handleBoxClick(name);

                if (subscribedKitchen === name) {
                    subscribedContainer.appendChild(box);
                } else {
                    unsubscribedContainer.appendChild(box);
                }
            });
        }

        function handleBoxClick(kitchenName) {
            modal.style.display = "flex";
            modalTitle.textContent = kitchenName;

            const now = new Date();
            const subscribedAt = subscriptionDate ? new Date(subscriptionDate) : null;

            if (subscribedKitchen === kitchenName) {
                // Check if 2 months have passed
                const diffInMonths = subscribedAt ? (now.getFullYear() - subscribedAt.getFullYear()) * 12 + (now.getMonth() - subscribedAt.getMonth()) : 0;
                if (diffInMonths >= 2) {
                    actionButton.textContent = "Unsubscribe";
                    actionButton.onclick = () => {
                        subscribedKitchen = null;
                        subscriptionDate = null;
                        closeModal();
                        renderKitchens();
                    };
                } else {
                    actionButton.textContent = "Unsubscribe (Available after 2 months)";
                    actionButton.onclick = () => alert("You can unsubscribe only after 2 months.");
                }
            } else if (!subscribedKitchen) {
                actionButton.textContent = "Subscribe";
                actionButton.onclick = () => {
                    subscribedKitchen = kitchenName;
                    subscriptionDate = new Date().toISOString();
                    closeModal();
                    renderKitchens();
                };
            } else {
                actionButton.textContent = "Already Subscribed to Another Kitchen";
                actionButton.onclick = () => alert("You can only subscribe to one kitchen at a time.");
            }
        }

        function closeModal() {
            modal.style.display = "none";
        }

        renderKitchens();
    </script>
</body>
</html>
